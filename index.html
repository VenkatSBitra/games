<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="theme-color" content="black" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="icons/icon-144.png" sizes="144x144" />
    <link rel="icon" href="icons/icon-192.png" sizes="192x192" />
    <link rel="icon" href="icons/icon-512.png" sizes="512x512" />
    <title>Games by Venkat</title>
</head>
<body>
<!-- The Modal -->
<div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>Add to home screen?</p>
        <button onclick="offlinePrompt()">Install</button>
    </div>
</div>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/sw.js', {scope: '/'}).then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, function(err) {
        console.log('ServiceWorker registration failed: ', err);
      });
    });
  }
  let deferredPrompt;
  window.addEventListener('beforeinstallprompt', function (e) {
    console.log('beforeinstallprompt triggered');
    e.preventDefault();
    deferredPrompt = e;
    modal.style.display = 'block';
  });
  // Get the modal
  var modal = document.getElementById('myModal');
  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName('close')[0];
  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target === modal) {
      modal.style.display = 'none';
    }
  }
  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = 'none';
  }
  function offlinePrompt() {
    deferredPrompt.prompt();
  }
</script>

<a href="15Puzzle/file.html" style="font-size: 30px">15 Puzzle (Recommended)</a>
<br />
<a href="15PuzzleCanvas/file.html" style="font-size: 30px">15 Puzzle (Deprecated)</a>

</body>
</html>
